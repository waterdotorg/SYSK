name: Simple Keep-Alive
on:
  schedule:
    - cron: '0 */4 * * *'
  workflow_dispatch:

jobs:
  ping:
    runs-on: ubuntu-latest
    timeout-minutes: 5
    steps:
      - name: Wake Up App
        run: |
          APP_URL="https://water-portal-assistant.streamlit.app"
          
          echo "⏰ Pinging app at $(date -u)"
          echo "URL: $APP_URL"
          
          # Single request with very long timeout
          curl -sL "$APP_URL" \
            -A "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36" \
            --max-time 180 \
            -o /dev/null \
            || echo "⚠️ Request timed out, but app should be waking up"
          
          echo "✅ Keep-alive ping sent"
